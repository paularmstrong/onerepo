---
title: '@onerepo/plugin-docgen'
sidebar:
  label: Documentation generation
description: Official plugin for generating documentation in the oneRepo JavaScript and TypeScript monorepo toolchain.
meta:
  version: 1.0.0
  stability: stable
---

import { TabItem } from '@astrojs/starlight/components';
import Tabs from '../../../components/Tabs.astro';

## Installation

<Tabs group="pkgmanager">
  <TabItem label="npm">

    ```sh title="Install via npm"
    npm install --save-dev @onerepo/plugin-docgen
    ```

  </TabItem>
  <TabItem label="yarn">

    ```sh title="Install via Yarn"
    yarn add --dev @onerepo/plugin-docgen
    ```

  </TabItem>
  <TabItem label="pnpm">

    ```sh title="Install via pnpm"
    pnpm install --save-dev @onerepo/plugin-docgen
    ```

  </TabItem>
</Tabs>

:::tip[Example]
Check out our very own source level [example](example/) generated directly from the oneRepo source code using this plugin.
:::

## Configuration

{/* start-install-typedoc */}
{/* @generated SignedSource<<9b847ec5a1fb60fd74a1bd5a66f31900>> */}

### docgen()

```ts
function docgen(opts): Plugin;
```

Include the `eslint` plugin in your oneRepo plugin setup:

```js title="onerepo.config.ts" {1,4}
import { docgen } from '@onerepo/plugin-docgen';

export default {
	plugins: [docgen()],
};
```

#### Parameters

| Parameter | Type                  |
| --------- | --------------------- |
| `opts`    | [`Options`](#options) |

### Options

```ts
type Options: {
  format: "markdown" | "json";
  name: string | string[];
  outFile: string;
  outWorkspace: string;
  safeWrite: boolean;
};
```

Full configuration options for the Docgen core command.

```js title="onerepo.config.ts"
import { docgen } from '@onerepo/plugin-docgen';

export default {
	plugins: [
		docgen({
			format: 'markdown',
			outFile: './docs/cli.md',
			safeWrite: true,
		}),
	],
};
```

#### Type declaration

##### format?

```ts
optional format: "markdown" | "json";
```

Default output format for the documentation

- **Default:** `'markdown'`

##### name?

```ts
optional name: string | string[];
```

Override the name of the command.

- **Default:** `'docgen'`

##### outFile?

```ts
optional outFile: string;
```

If set, a file will be written by default to the given location (in the given `outWorkspace`)

##### outWorkspace?

```ts
optional outWorkspace: string;
```

If `outFile` is also set, the generated documentation will be written out.

##### safeWrite?

```ts
optional safeWrite: boolean;
```

Set to true to amend content to the given file using the file.writeSafe \| \`file.writeSafe\` method.

{/* end-install-typedoc */}

## Commands

{/* start-auto-generated-from-cli-docgen */}
{/* @generated SignedSource<<eae31dc5c19ef17bf4fe8e4d9ee63db2>> */}

### `one docgen`

Generate documentation for the oneRepo cli.

```sh
one docgen [options...]
```

Help documentation should always be easy to find. This command will help automate the creation of docs for this command-line interface. If you are reading this somewhere that is not your terminal, there is a very good chance that this command was already run for you!

Add this command to your one Repo tasks on pre-commit to ensure that your documentation is always up-to-date.

| Option            | Type                                          | Description                                                                |
| ----------------- | --------------------------------------------- | -------------------------------------------------------------------------- |
| `--add`           | `boolean`                                     | Add the output file to the git stage                                       |
| `--format`        | `"markdown"`, `"json"`, default: `"markdown"` | Output format for documentation                                            |
| `--heading-level` | `number`                                      | Heading level to start at for Markdown output                              |
| `--out-file`      | `string`                                      | File to write output to. If not provided, stdout will be used              |
| `--out-workspace` | `string`                                      | Workspace name to write the --out-file to                                  |
| `--safe-write`    | `boolean`                                     | Write documentation to a portion of the file with start and end sentinels. |

<details>

<summary>Advanced options</summary>

| Option            | Type      | Description                                                                          |
| ----------------- | --------- | ------------------------------------------------------------------------------------ |
| `--command`       | `string`  | Start at the given command, skip the root and any others                             |
| `--show-advanced` | `boolean` | Pair with `--help` to show advanced options.                                         |
| `--use-defaults`  | `boolean` | Use the oneRepo default configuration. Helpful for generating default documentation. |

</details>

{/* end-auto-generated-from-cli-docgen */}
